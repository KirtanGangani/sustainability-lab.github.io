---
title: Experiments with LoraPHY at IIT Gandhinagar
layout: post
author: rishi
signature_img: /images/lora-2.jpg
use_math: true
use_code: true
use_google_fonts: true
comments: true
---
We are interested in knowing how our Lora modules perform given the environmental and infrastructural conditions at IIT Gandhinagar. For this, we plan to do a set of experiments and update it in this blog. 


Some of the pre set conditions of our experiments are as follows:
- **Lora Module**: We used the Dragino Lora GPS Hat. We used only the Lora module and disconnected the GPS.
- **Lora PHY**: The experiment was based on Radio communication between Lora and had nothing to do with LoraWAN (or TTN)
- **Parameters**: Our Lora Module works at 868.1Mhz. Beside that, we could only change the Spreading Factor (SF) in the code provided by Dragino. We did not change the Transmit Power and the Bandwidth.
- **Source Code**: We used the same code as listed in Dragino's "[Two RPI use LoRa to transmit](https://wiki.dragino.com/index.php?title=Lora/GPS_HAT#Example3_--_Two_RPI_use_LoRa_to_transmit)" example.
>For all these observations, the Receiver was at Spreading Factor of 12 and the transmitter was at Spreading Factor of 7. Packet length was 50 Bytes
---

**Experiment 1** The objective of our first experiment was to verify if our Lora module works as expected. For this, we monitored the Received Signal Strength (RSSI) as the distance between sender and receiver increases.

![](/images/lora-2.jpg)
Fig 1: The Receiver Lora GPS Hat With Rpi, 267m Away From The Sender

**How we performed the experiment?** Observe the snapshot of Google Map below. One of our interns, Sumit was holding the Transmitting Lora Module at the point S. Holding the Receiver Lora Module, I gradually started moving away from the Transmitter. I reached Point A (128m away from the transmitter) and thereafter Point B(168m), Point C(219m) and Point D(268m). I stayed stationary at each of the points for about 1 minute before returning to Point S. 

![](/images/lora-map.png)
Fig 3: A Google Map Snapshot showing the location of Sender and Receiver Lora Module at IIT Gandhinagar Campus

Our Lora Module was attached to Raspberry Pi. The Raspberry Pi was drawing power from a Power Bank. The Transmitter and Receiver Scripts starts automatically in the Pi once it is powered. Besides that, both the script log the output in a separate file.

We converted the ```receive.log``` to a CSV file and used Python and Matplotlib to plot the result. We observed the following. 

|  Distance | RX_RSSI  |  RX_SNR |
|---|---|---|
|  128.3m |  -60dB |  9 |
|  167.7m |  -100dB |  6 |
|  219.3m |  -136db | 2  |
|  267.7m  |  PL | PL  |

![Lora Experiment 1 Observation 1](/images/lora-expt-1-fig.png)
![Lora Experiment 1 Observation 2](/images/lora-expt-1-fig2.png)

The plots appears to be as expected, i.e. we observed a drop in RSSI as distance increases. The SNR vs Distance plot does not seem to have a particular trend and this looks okay as SNR should change only with respect to interference.

---

